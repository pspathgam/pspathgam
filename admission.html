<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admission Register - Government Primary School Pethgam Wagoora</title>

<!-- jsPDF + html2canvas -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
    body{
        font-family: Arial, sans-serif;
        background:#eef7ff;
        margin:0;
        padding:20px;
    }

    .tab-buttons{
        display:flex;
        gap:10px;
        margin-bottom:20px;
    }

    .tab-buttons button{
        background:#0b76ef;
        color:white;
        padding:10px 22px;
        border:none;
        border-radius:6px;
        font-weight:bold;
        cursor:pointer;
        box-shadow:0px 4px 0px #064a97;
        transition:0.1s;
    }
    .tab-buttons button:active{
        box-shadow:0px 1px 0px #064a97;
        transform:translateY(3px);
    }

    .container{
        background:white;
        padding:20px;
        border-radius:8px;
        box-shadow:0px 0px 10px #bcd4ff;
        max-width:800px;
        margin:auto;
    }

    label{
        display:block;
        margin-top:10px;
        font-weight:bold;
    }

    input, select{
        width:100%;
        padding:8px;
        margin-top:5px;
        border-radius:4px;
        border:1px solid #999;
    }

    textarea{
        width:100%;
        height:100px;
        border-radius:4px;
        border:1px solid #999;
        padding:8px;
        margin-top:5px;
    }

    .submit-btn{
        background:#28a745;
        color:white;
        padding:12px;
        border:none;
        border-radius:6px;
        width:100%;
        font-size:18px;
        margin-top:20px;
        cursor:pointer;
        font-weight:bold;
        box-shadow:0px 4px 0px #0c6c25;
        transition:0.1s;
    }
    .submit-btn:active{
        box-shadow:0px 1px 0px #0c6c25;
        transform:translateY(3px);
    }

    .office-use-box{
        background:#fff;
        border:2px dashed #0066cc;
        padding:20px;
        max-width:800px;
        margin:25px auto;
        border-radius:8px;
    }

    .photo-preview{
        width:120px;
        height:140px;
        border:1px solid #000;
        object-fit:cover;
        margin-top:10px;
    }

</style>
</head>

<body>

<div class="tab-buttons">
    <button>Admission Register</button>
    <button>Student List</button>
    <button>Search Student</button>
</div>

<div id="A4page" class="container">

<h2 style="text-align:center; margin-top:0;">
    <b>ADMISSION REGISTER</b><br>
    Government Primary School Pethgam Wagoora
</h2>

<form id="admissionForm">

    <!-- Admission No Blank -->
    <label>Admission No. (To be allotted by School)</label>
    <input type="text" disabled placeholder="Leave Blank â€“ Filled by Office">

    <!-- Upload Photo -->
    <label>Upload Student Photo</label>
    <input type="file" id="photoUpload" accept="image/*">
    <img id="photoPreview" class="photo-preview" alt="Student Photo Preview">

    <label>Student Full Name</label>
    <input type="text" id="studentname" required>

    <label>Father's Name</label>
    <input type="text" id="fathername" required>

    <label>Mother's Name</label>
    <input type="text" id="mothername" required>

    <label>Date of Birth</label>
    <input type="date" id="dob" required>

    <label>Aadhaar Number</label>
    <input type="text" id="aadhaar" maxlength="12">

    <label>Gender</label>
    <select id="gender" required>
        <option value="">Select</option>
        <option>Male</option>
        <option>Female</option>
        <option>Other</option>
    </select>

    <label>Class for Admission</label>
    <select id="class" required>
        <option value="">Select Class</option>
        <option>Nursery</option>
        <option>LKG</option>
        <option>UKG</option>
        <option>1st</option>
        <option>2nd</option>
        <option>3rd</option>
        <option>4th</option>
        <option>5th</option>
    </select>

    <label>Residential Address</label>
    <textarea id="address" required></textarea>

    <label>Mobile Number</label>
    <input type="text" id="mobile" required>

    <h3 style="margin-top:25px; text-decoration:underline;">Parents Declaration</h3>
    <p style="text-align:justify;">
        I do hereby declare that the above information provided by me is true to the best of my knowledge and belief. 
        I further declare that I will abide by the rules and regulations laid down by the school and the department from 
        time to time and I will co-operate with the institution for the betterment of my ward. I hereby give consent to 
        provide the Aadhaar for demographic authentication of my ward.
    </p>

    <label>
        <input type="checkbox" id="agree" required>
        I agree to the above declaration.
    </label>

    <button type="submit" class="submit-btn">Submit & Download PDF</button>

</form>
</div>

<div class="office-use-box">
    <h3 style="text-align:center; margin-top:0;">OFFICE USE ONLY</h3>

    <label>Admission No. Allotted</label>
    <input type="text">

    <label>Class Admitted To</label>
    <input type="text">

    <label>Date of Admission</label>
    <input type="date">

    <p style="font-weight:bold;">
        The Student is admitted on __________________.<br>
        All required documents including Birth Certificate, Residence Proof and Transfer Certificate (if applicable) have been verified.
    </p>

    <label>Signature of Parent</label>
    <input type="text">

    <label>Signature of Admission Incharge</label>
    <input type="text">

    <label>Signature of Headmaster</label>
    <input type="text">

</div>

<script>
// Show uploaded photo preview
document.getElementById("photoUpload").addEventListener("change", function(){
    const file = this.files[0];
    if(file){
        document.getElementById("photoPreview").src = URL.createObjectURL(file);
    }
});

// Generate A4 PDF
document.getElementById("admissionForm").addEventListener("submit", async function(e){
    e.preventDefault();

    const { jsPDF } = window.jspdf;
    const A4 = new jsPDF("p", "mm", "a4");

    const page = document.getElementById("A4page");

    await html2canvas(page, { scale: 2 }).then(canvas => {
        const imgData = canvas.toDataURL("image/jpeg", 1.0);
        const width = 210;   // A4 in mm
        const height = canvas.height * 210 / canvas.width;
        A4.addImage(imgData, "JPEG", 0, 0, width, height);
    });

    A4.save("Admission_Form.pdf");

    alert("Admission Form PDF generated successfully!");
});
</script>

</body>
</html>
